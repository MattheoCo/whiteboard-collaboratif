<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Tableau Blanc Priv√©</title>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js"></script>
</head>
<body>
<h1>Connexion</h1>
<form id="login-form">
  <input type="email" id="email" placeholder="Email" required />
  <input type="password" id="password" placeholder="Mot de passe" required />
  <button type="submit">Se connecter</button>
</form>

<div id="user-info" style="display:none;">
  <p>Connect√© en tant que <span id="user-email"></span></p>
  <button id="logout">Se d√©connecter</button>
</div>

<script>
  const firebaseConfig = {{ firebase_config|raw }};

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  // üîê Connexion
  document.getElementById("login-form").addEventListener("submit", function(e) {
    e.preventDefault();
    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;

    auth.signInWithEmailAndPassword(email, password)
            .then(userCredential => {
              document.getElementById("login-form").style.display = "none";
              document.getElementById("user-info").style.display = "block";
              document.getElementById("user-email").textContent = userCredential.user.email;
            })
            .catch(error => {
              alert("Erreur : " + error.message);
            });
  });

  // üîì D√©connexion
  document.getElementById("logout").addEventListener("click", function() {
    auth.signOut().then(() => {
      document.getElementById("login-form").style.display = "block";
      document.getElementById("user-info").style.display = "none";
    });
  });
</script>
</body>
</html>
